{% extends 'base.html' %}

{% block title %}Journey Analyzer{% endblock %}

{% block head %}
    {{ super() }}
    {% assets 'journey-view-css' %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" >
    {% endassets %}
{% endblock %}

{% block banner %}
    <div class="banner banner-jumbotron banner-gray">
        <div class="container">
            <div class="row">
                <div class="col-md-12 center-block">
                    <h2>&nbsp;</h2>
                    <h2 style="color:#1c4072">View journeys and their performance data.</h2>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body_content %}
    <div class="row">
        <div class="col-md-4 center-block">
            <div class="well form-well signup-info">
                <p><strong>Select a journey and click "GO!":</strong></p>
                <select id="journey-select">
                    {% for journey in journeys %}
                        <option value="{{ journey._id }}">{{ journey.name }}</option>
                    {% endfor %}
                </select>
                <input type="button" class="btn btn-info" id="btn-layout" value="GO!"/>
            </div>
        </div>
        <div class="col-md-4 center-block">
            <div class="well form-well">
                <p><strong>Legend:</strong></p>
                <p><div width="30" height="30" style="display:inline;background-color:#1f77b4;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> Didn't Open</p>
                <p><div width="30" height="30" style="display:inline;background-color:#ff7f0e;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> Opened but didn't Click</p>
                <p><div width="30" height="30" style="display:inline;background-color:#2ca02c;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div> Clicked</p>
            </div>
        </div>
        <div class="col-md-4 center-block">
            <div class="well form-well">
                <p>
                    <strong>Use the checkboxes to drill down into a particular send.</strong>
                    <br/> - Left checkbox -> Drill Down Area A
                    <br/> - Right checkbox -> Drill Down Area B
                </p>
                <center>
                    <img src="img/journeyBuilder/checkbox_detail.png"/>
                </center>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 center-block">
            <div class="well" id="journey-well">
                <div id="journey-paper" style="background-color: ghostwhite"></div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 center-block">
            <div class="well" id="drill-down-well">
                <div id="drill-down-areaA" style="background-color: ghostwhite">
                    <strong>Drill Down into One Email (A SIDE)</strong>
                    <div class="well form-well" id="send-info"></div>
                    <div class="well form-well col-md-6">
                        <label>Data:</label>
                        <select id="data-selection">
                            <option value="">--select an table--</option>
                            <option value="SendJob">Send Jobs</option>
                            <option value="EmlSend">Email Sends</option>
                            <option value="EmlOpen">Email Opens</option>
                            <option value="EmlClick">Email Clicks</option>
                        </select>

                        <br/>
                        <label>Group Data By:</label>
                        <select id="data-grouping" disabled>
                            <option value="">-- select one --</option>
                        </select>
                        <label>and</label>
                        <select id="data-grouping2" disabled>
                            <option value="">-- optional --</option>
                        </select>
                    </div>

                    <div class="well form-well col-md-6">
                        <label>Calculate:</label>
                        <select id="aggregate-op">
                            <option value="count">Count</option>
                            <option value="average">Average</option>
                            <option value="max">Maximum</option>
                            <option value="min">Minimum</option>
                            <option value="sum">Sum</option>
                        </select>
                        <select id="aggregate-field" disabled>
                            <option value="">-- select one--</option>
                        </select>

                        <br/>
                        <label>Graph Type:</label>
                        <select id="graph-type" disabled>
                            <option value="">-- select one --</option>
                        </select>

                        <br/>
                        <input type="button" value="update" name="update" class="drill-down-button update-button btn btn-default">
                        <input type="button" value="save" name="save" class="drill-down-button save-button btn btn-default">
                        <input type="button" value="save-as" name="save-as" class="drill-down-button save-as-button btn btn-default">
                    </div>

                    <div class="well form-well">
                        <label>Limit data by:</label>
                        <input type="button" value="add" name="add" id="limit-by-add" class="updateView btn btn-default btn-xs">

                        <div id="limit-by-items">
                            <div class="limit-by-item">
                                <select id="limit-by-field" disabled>
                                    <option value="">-- select one --</option>
                                </select>
                                <select id="limit-by-op" disabled>
                                    <option value="">-- select one --</option>
                                </select>
                                <label>Value:</label>
                                <input type="text" id="limit-by-val1" disabled/>
                                <input type="text" id="limit-by-val2" disabled hidden/>
                                <input type="button" value="delete" name="delete" id="limit-by-delete" class="btn btn-default btn-xs" style="display:none;"/>
                            </div>
                        </div>
                    </div>

                    <div class="well form-well">
                        <div id="drill-down-graph" style="background-color: ghostwhite"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 center-block">
            <div class="well" id="drill-down-well">
                <div id="drill-down-areaB" style="background-color: ghostwhite">
                    <strong>Drill Down into One Email (B SIDE)</strong>
                    <div class="well form-well" id="send-info"></div>
                    <div class="well form-well col-md-6">
                        <label>Data:</label>
                        <select id="data-selection">
                            <option value="">--select an table--</option>
                            <option value="SendJob">Send Jobs</option>
                            <option value="EmlSend">Email Sends</option>
                            <option value="EmlOpen">Email Opens</option>
                            <option value="EmlClick">Email Clicks</option>
                        </select>

                        <br/>
                        <label>Group Data By:</label>
                        <select id="data-grouping" disabled>
                            <option value="">-- select one --</option>
                        </select>
                        <label>and</label>
                        <select id="data-grouping2" disabled>
                            <option value="">-- optional --</option>
                        </select>
                    </div>

                    <div class="well form-well col-md-6">
                        <label>Calculate:</label>
                        <select id="aggregate-op">
                            <option value="count">Count</option>
                            <option value="average">Average</option>
                            <option value="max">Maximum</option>
                            <option value="min">Minimum</option>
                            <option value="sum">Sum</option>
                        </select>
                        <select id="aggregate-field" disabled>
                            <option value="">-- select one--</option>
                        </select>

                        <br/>
                        <label>Graph Type:</label>
                        <select id="graph-type" disabled>
                            <option value="">-- select one --</option>
                        </select>

                        <br/>
                        <input type="button" value="update" name="update" class="drill-down-button update-button btn btn-default">
                        <input type="button" value="save" name="save" class="drill-down-button save-button btn btn-default">
                        <input type="button" value="save-as" name="save-as" class="drill-down-button save-as-button btn btn-default">
                    </div>

                    <div class="well form-well">
                        <label>Limit data by:</label>
                        <input type="button" value="add" name="add" id="limit-by-add" class="updateView btn btn-default btn-xs">

                        <div id="limit-by-items">
                            <div class="limit-by-item">
                                <select id="limit-by-field" disabled>
                                    <option value="">-- select one --</option>
                                </select>
                                <select id="limit-by-op" disabled>
                                    <option value="">-- select one --</option>
                                </select>
                                <label>Value:</label>
                                <input type="text" id="limit-by-val1" disabled/>
                                <input type="text" id="limit-by-val2" disabled hidden/>
                                <input type="button" value="delete" name="delete" id="limit-by-delete" class="btn btn-default btn-xs" style="display:none;"/>
                            </div>
                        </div>
                    </div>

                    <div class="well form-well">
                        <div id="drill-down-graph" style="background-color: ghostwhite"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% assets "journey-view-js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}